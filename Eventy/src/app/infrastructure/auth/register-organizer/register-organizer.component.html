<form class="form" [formGroup]="registerForm">
  <p class="register-label">
    Register as Event Organiser
  </p>

  <div class="fields">
    <div class="profile-picture-picker profile-picture-container" (click)="pickProfilePicture()">
      <img [src]="registerForm.controls['profilePicture'].value" class="profile-picture" alt="Profile picture" />
      <span class="change-picture-note">Change Picture</span>
      <input type="file" #profilePictureInput id="profilePictureInputId" (change)="onFileSelected($event)" accept="image/*">
    </div>

    <mat-form-field class="field">
      <mat-label>Email</mat-label>
      <input type="email" matInput placeholder="Ex. something@gmail.com" formControlName="email" />
      @if (registerForm.controls['email'].hasError('email') && !registerForm.controls['email'].hasError('required')) {
        <mat-error>Please enter a valid email address</mat-error>
      }
      @if (registerForm.controls['email'].hasError('required')) {
        <mat-error>Email is <strong>required</strong></mat-error>
      }
      <button matSuffix mat-icon-button aria-label="Clear" (click)="resetValue('email')">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>

    <mat-form-field class="field">
      <mat-label>Password</mat-label>
      <input matInput type="password" formControlName="password" />
      @if (registerForm.controls['password'].hasError('required')) {
        <mat-error>Password is <strong>required</strong></mat-error>
      }
      <button matSuffix mat-icon-button aria-label="Clear" (click)="resetValue('password')">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>

    <mat-form-field class="field">
      <mat-label>Confirm password</mat-label>
      <input matInput type="password" formControlName="confirmedPassword" />
      @if (registerForm.controls['confirmedPassword'].hasError('required') && !registerForm.controls['confirmedPassword'].hasError('match')) {
        <mat-error>Password confirmation is <strong>required</strong></mat-error>
      }
      @if (registerForm.controls['confirmedPassword'].hasError('match')) {
        <mat-error>Passwords don't match</mat-error>
      }
      <button matSuffix mat-icon-button aria-label="Clear" (click)="resetValue('confirmedPassword')">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>

    <div class="name-fields">
      <mat-form-field class="name-field">
        <mat-label>First Name</mat-label>
        <input type="text" matInput placeholder="Your Name" formControlName="firstName" />
        @if (registerForm.controls['firstName'].hasError('required')) {
          <mat-error>First name is <strong>required</strong></mat-error>
        }
        <button matSuffix mat-icon-button aria-label="Clear" (click)="resetValue('firstName')">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>

      <mat-form-field class="name-field">
        <mat-label>Last Name</mat-label>
        <input type="text" matInput placeholder="Your Last Name" formControlName="lastName" />
        @if (registerForm.controls['lastName'].hasError('required')) {
          <mat-error>Last name is <strong>required</strong></mat-error>
        }
        <button matSuffix mat-icon-button aria-label="Clear" (click)="resetValue('lastName')">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
    </div>

    <mat-form-field class="field">
      <mat-label>Address</mat-label>
      <input type="text" matInput placeholder="Some Street 32" formControlName="address" />
      @if (registerForm.controls['address'].hasError('required')) {
        <mat-error>Address is <strong>required</strong></mat-error>
      }
      <button matSuffix mat-icon-button aria-label="Clear" (click)="resetValue('address')">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>

    <mat-form-field class="field">
      <mat-label>Phone Number</mat-label>
      <input type="text" matInput placeholder="Ex. +381 65 57 30 724" formControlName="phoneNumber" />
      @if (registerForm.controls['phoneNumber'].hasError('required') && !registerForm.controls['phoneNumber'].hasError("pattern")) {
        <mat-error>Phone number is <strong>required</strong></mat-error>
      }
      @if (registerForm.controls['phoneNumber'].hasError('pattern')) {
        <mat-error>Invalid phone number</mat-error>
      }
      <button matSuffix mat-icon-button aria-label="Clear" (click)="resetValue('phoneNumber')">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <button mat-flat-button class="button" (click)="register()" type="submit">REGISTER</button>
</form>
